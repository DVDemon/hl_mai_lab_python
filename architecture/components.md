# Компонентная архитектура
<!-- Состав и взаимосвязи компонентов системы между собой и внешними системами с указанием протоколов, ключевые технологии, используемые для реализации компонентов.
Диаграмма контейнеров C4 и текстовое описание. 
-->
## Компонентная диаграмма

```plantuml
@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

AddElementTag("microService", $shape=EightSidedShape(), $bgColor="CornflowerBlue", $fontColor="white", $legendText="microservice")
AddElementTag("storage", $shape=RoundedBoxShape(), $bgColor="lightSkyBlue", $fontColor="white")

Person(admin, "Администратор")
Person(user, "Пользователь")
Person(support, "Поддержка")
Rel(user, support, "Помощь и жалоба на поездки/пользователей")

System_Boundary(hitchhiking_service, "Поиск попутчиков") {
   Container(app, "Клиентское веб-приложение", "JS, HTML, CSS, React", "Портал поиска попутчиков")
   Container(client_service, "Сервис авторизации", "Python", "Сервис управления пользователями", $tags = "microService")    
   Container(trip, "Сервис поездок", "Python",  "Создание/хранение информации о поездках", $tags = "microService")     
   Container(route, "Сервис маршрутов", "Python", "Создание/xранение информации о маршрутах", $tags = "microService")
   ContainerDb(db, "База данных", "MySQL", "Хранение данных о пользователях, поездках и маршрутах", $tags = "storage")
   
}

Rel(admin, app, "Добавление/просмотр информации о пользователях")
Rel(user, app, "Регистрация, просмотр информации о поездках, создание/запись на них")
Rel(support, app, "Блокирование пользователей и удаление спама/нежелательного контента")


Rel_D(app, trip, "Работа с поездками", "http://localhost/person"))
Rel_D(trip, route, "Запрос информации о маршрутах")
Rel_D(trip, db, "", "INSERT/SELECT/UPDATE","SQL")
Rel_D(route, db, "", "INSERT/SELECT/UPDATE","SQL")

Rel_D(app, client_service, "Работа с пользователями", "http://localhost/person")
Rel_D(client_service, db, "", "INSERT/SELECT/UPDATE", "SQL")


@enduml
```
## Список компонентов

### Сервис авторизации
**API**:
-	Создание нового пользователя
    - Входные параметры: login, Имя, Фамилия, email, обращение (гн/гжа)
    - Выходные параметры, отсутствуют
-	Поиск пользователя по логину
    - Входные параметры: login
    - Выходные параметры: Имя, Фамилия, email, обращение (гн/гжа)
-	Поиск пользователя по маске имя и фамилии
    - Входные параметры: маска фамилии, маска имени
    - Выходные параметры: login, Имя, Фамилия, email, обращение (гн/гжа)

### Сервис поездок
**API**:
- Сохранение информации о поездки
  - Входные параметры: дата, кол-во людей, маршрут
  - Выходные параметры: получилось ли создать поездку
- Получение информации о поездках
  - Входные параметры: диапазон дат
  - Выходные параметры: массив троек (дата, кол-во свободных мест, маршрут)
- Запись на поездку
  - Входные параметры: диапазон дат
  - Выходные параметры: получилось ли записать, если да, то детали поездки

### Сервис маршрутов
**API**:
- Создание маршрута
  - Входные параметры: точка старта, точка финиша
  - Выходные параметры: получилось ли создать поезд
- Получение информации о существующих маршрутах
  - Входные параметры: точка старта или точка финиша
  - Выходные параметры: массив пар (точка старта, точка финиша)